{
  "name": "GitFathom",
  "displayName": "GitFathom",
  "description": "Generate git commit messages from repository changes with configurable AI providers.",
  "version": "0.0.1",
  "publisher": "local",
  "engines": {
    "vscode": "^1.90.0"
  },
  "categories": [
    "Source Control",
    "Other"
  ],
  "activationEvents": [
    "onCommand:autogitllm.generateCommitMessage",
    "onCommand:autogitllm.openSetup"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "autogitllm.generateCommitMessage",
        "title": "AI 生成提交信息 / Generate Commit Message",
        "category": "GitFathom"
      },
      {
        "command": "autogitllm.openSetup",
        "title": "打开配置向导 / Open Setup Wizard",
        "category": "GitFathom"
      }
    ],
    "menus": {
      "scm/title": [
        {
          "command": "autogitllm.openSetup",
          "when": "scmProvider == git",
          "group": "navigation@89"
        },
        {
          "command": "autogitllm.generateCommitMessage",
          "when": "scmProvider == git",
          "group": "navigation@90"
        }
      ]
    },
    "configuration": {
      "title": "GitFathom",
      "properties": {
        "autogitllm.language": {
          "type": "string",
          "title": "语言",
          "default": "zh",
          "enum": [
            "zh",
            "en"
          ],
          "enumItemLabels": [
            "中文",
            "English"
          ],
          "enumDescriptions": [
            "简体中文",
            "English"
          ],
          "markdownDescription": "界面语言与提交信息语言。"
        },
        "autogitllm.provider": {
          "type": "string",
          "title": "AI 厂商",
          "default": "openai",
          "enum": [
            "openai",
            "deepseek",
            "gemini",
            "kimi",
            "glm",
            "custom"
          ],
          "enumItemLabels": [
            "OpenAI",
            "DeepSeek",
            "Gemini",
            "Kimi（月之暗面）",
            "GLM（智谱）",
            "自定义兼容厂商"
          ],
          "markdownDescription": "AI 厂商选择（custom 使用 OpenAI 兼容接口）。"
        },
        "autogitllm.model": {
          "type": "string",
          "default": "",
          "title": "模型名",
          "markdownDescription": "模型名称，留空则使用厂商默认模型。"
        },
        "autogitllm.apiKey": {
          "type": "string",
          "default": "",
          "title": "API Key",
          "markdownDescription": "厂商 API Key，也可使用环境变量（OPENAI_API_KEY、DEEPSEEK_API_KEY、GEMINI_API_KEY、MOONSHOT_API_KEY、ZHIPU_API_KEY、AUTOGITLLM_API_KEY）。"
        },
        "autogitllm.baseUrl": {
          "type": "string",
          "default": "",
          "title": "Base URL",
          "markdownDescription": "自定义 Base URL（支持第三方网关或代理）。"
        },
        "autogitllm.customRequestPath": {
          "type": "string",
          "default": "/chat/completions",
          "title": "请求路径",
          "markdownDescription": "自定义/OpenAI 兼容厂商的请求路径。"
        },
        "autogitllm.extraHeaders": {
          "type": "string",
          "default": "{}",
          "title": "额外请求头",
          "markdownDescription": "额外 HTTP 请求头的 JSON，例如 {\"X-Api-Key\":\"...\"}。"
        },
        "autogitllm.temperature": {
          "type": "number",
          "default": 0.2,
          "minimum": 0,
          "maximum": 2,
          "title": "温度",
          "markdownDescription": "生成采样温度。"
        },
        "autogitllm.maxTokens": {
          "type": "number",
          "default": 120,
          "minimum": 16,
          "maximum": 2048,
          "title": "最大输出 Token",
          "markdownDescription": "输出的最大 Token 数。"
        },
        "autogitllm.requestTimeoutMs": {
          "type": "number",
          "default": 25000,
          "minimum": 3000,
          "maximum": 120000,
          "title": "请求超时（毫秒）",
          "markdownDescription": "HTTP 请求超时（毫秒）。"
        },
        "autogitllm.commandTimeoutMs": {
          "type": "number",
          "default": 12000,
          "minimum": 3000,
          "maximum": 120000,
          "title": "命令超时（毫秒）",
          "markdownDescription": "Git 命令超时（毫秒）。"
        },
        "autogitllm.includeOnlyStaged": {
          "type": "boolean",
          "default": false,
          "title": "仅包含暂存区",
          "markdownDescription": "开启后仅包含暂存区变更。"
        },
        "autogitllm.maxDiffBytes": {
          "type": "number",
          "default": 120000,
          "minimum": 4096,
          "maximum": 2097152,
          "title": "Diff 最大字节数",
          "markdownDescription": "发送给模型的 diff UTF-8 最大字节数。"
        },
        "autogitllm.systemPrompt": {
          "type": "string",
          "default": "",
          "title": "系统提示词",
          "markdownDescription": "控制生成风格的系统提示词，留空则使用内置默认值。"
        },
        "autogitllm.ruleTemplate": {
          "type": "string",
          "default": "",
          "title": "规则模板",
          "markdownDescription": "提交信息生成的主规则模板，留空则使用内置默认值。"
        },
        "autogitllm.additionalRules": {
          "type": "string",
          "default": "",
          "title": "附加规则",
          "markdownDescription": "附加到规则模板后的额外指令。"
        },
        "autogitllm.copyToClipboard": {
          "type": "boolean",
          "default": false,
          "title": "复制到剪贴板",
          "markdownDescription": "生成后同时复制到剪贴板。"
        }
      }
    }
  },
  "scripts": {
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "lint": "tsc -noEmit -p ./",
    "vscode:prepublish": "npm run compile"
  },
  "devDependencies": {
    "@types/node": "^20.17.57",
    "@types/vscode": "^1.90.0",
    "typescript": "^5.6.3"
  }
}
